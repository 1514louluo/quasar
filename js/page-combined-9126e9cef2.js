!function(){function e(e){var t=p.offsetHeight;if(s.className=e>t?"fix-sidebar":"",!k&&L){for(var n,o=0;o<L.length;o++){var i=L[o];if(i.offsetTop>e){n||(n=i);break}n=i}n&&r(n.id)}}function t(e){var t=document.createElement("li"),n=e.textContent.replace(/\(.*\)$/,"");return e.id=e.id.replace(/\(.*\)$/,"").replace(/\$/,""),t.innerHTML='<a class="section-link" data-scroll href="#'+e.id+'">'+n+"</a>",t}function n(e){for(var t=[],n=e.nextSibling;n&&"H2"!==n.tagName;)"H3"===n.tagName&&t.push(n),n=n.nextSibling;return t}function o(e,n){var o=document.createElement("ul");return n&&(o.className="menu-sub"),e.forEach(function(e){o.appendChild(t(e))}),o}function r(e){var t=v.querySelector(".section-link.active"),n="string"==typeof e?v.querySelector('.section-link[href="#'+e+'"]'):e;n!==t&&(t&&t.classList.remove("active"),n.classList.add("active"))}function i(e){var t=document.createElement("a");t.href="#"+e.id,t.setAttribute("data-scroll",""),e.parentNode.insertBefore(t,e),t.appendChild(e)}function c(e,t,n,o){return t+n*(e/=o)*e*e}function a(e){function t(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}var o=n(),r=0-o,i=0,a=20,e="undefined"==typeof e?500:e,l=function(){i+=a;var n=c(i,o,r,e);t(n),e>i&&q(l)};l()}function l(e){y.classList[e>1e3?"add":"remove"]("visible")}function d(){var t=m&&m.scrollTop||f.scrollTop;e(t),l(t)}var u=[].forEach,s=document.getElementById("main"),m=document.documentElement,f=document.body,p=document.getElementById("header"),v=document.querySelector(".sidebar"),h=document.querySelector(".content"),y=document.getElementById("toTop"),E=document.getElementById("mobile-bar"),b=E.querySelector(".menu-button");b.addEventListener("click",function(){v.classList.toggle("open")}),f.addEventListener("click",function(e){e.target===b||v.contains(e.target)||v.classList.remove("open")});var g=v.querySelector(".sidebar-link.current");if(g){var w,L=[];w=document.createElement("ul"),w.className="menu-sub",g.parentNode.appendChild(w);var T=h.querySelectorAll("h2");T.length?u.call(T,function(e){w.appendChild(t(e));var r=n(e);L.push(e),L.push.apply(L,r),r.length&&w.appendChild(o(r))}):(T=h.querySelectorAll("h3"),u.call(T,function(e){w.appendChild(t(e)),L.push(e)}));var k=!1;w.addEventListener("click",function(e){e.preventDefault(),e.target.classList.contains("section-link")&&(v.classList.remove("open"),r(e.target),k=!0,setTimeout(function(){k=!1},400))},!0),L.forEach(i),smoothScroll.init({speed:400,offset:window.innerWidth>720?40:58})}var q=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();y.addEventListener("click",function(e){e.preventDefault(),a(1e3)}),window.addEventListener("scroll",d),window.addEventListener("resize",d)}();