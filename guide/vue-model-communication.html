<!DOCTYPE html><html lang="en"><title>VueModel Communication - Quasar Framework</title><meta charset="utf-8"><meta name="description" content="Quasar Framework - Build desktop & phone/tablet apps simultaneously"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link href="http://fonts.googleapis.com/css?family=Dosis:300,500&text=Quasar%20Framework" rel="stylesheet"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><link rel="icon" href="/images/quasar-logo.png" type="image/x-icon"><link rel="stylesheet" href="/css/page-combined-9fd51066a8.css"><body class=""><div id="header"><a class="menu-button"><i class="fa fa-bars"></i></a> <a id="logo" href="/"><img src="/images/quasar-logo.png"> <span>Quasar Framework</span> </a><a href="/guide/" class="menu-link current">Guide </a><a href="/api/" class="menu-link">API </a><a href="/components/" class="menu-link">Components </a><a href="/search/" class="menu-link"><i class="fa fa-search" style="vertical-align:middle"></i> </a><a href="https://github.com/rstoenescu/quasar-framework" class="menu-link" target="_blank"><i class="fa fa-github" style="vertical-align:middle"></i> </a><a href="https://twitter.com/quasarframework" class="menu-link" target="_blank"><i class="fa fa-twitter" style="vertical-align:middle"></i></a></div><div class="sidebar-backdrop"></div><div class="sidebar"><div class="list"><div class="sidebar-menu"><a href="/guide/" class="menu-link current">Guide </a><a href="/api/" class="menu-link">API </a><a href="/components/" class="menu-link">Components </a><a href="/search/" class="menu-link"><i class="fa fa-search" style="vertical-align:middle"></i> </a><a href="https://github.com/rstoenescu/quasar-framework" class="menu-link" target="_blank"><i class="fa fa-github" style="vertical-align:middle"></i> </a><a href="https://twitter.com/quasarframework" class="menu-link" target="_blank"><i class="fa fa-twitter" style="vertical-align:middle"></i></a></div><h2>Guide</h2><ul class="menu-root"><li><a href="/guide/index.html" class="sidebar-link">Getting Started</a><li><a href="/guide/installation.html" class="sidebar-link">Installation</a><li><a href="/guide/create-app.html" class="sidebar-link">Create App</a><li><a href="/guide/cli-commands.html" class="sidebar-link">CLI Commands</a><li><a href="/guide/built-in-stack.html" class="sidebar-link">Built-in Stack</a><li><a href="/guide/contributing-to-quasar.html" class="sidebar-link">Contributing to Quasar</a></ul><h3>App</h3><ul class="menu-root"><li><a href="/guide/quasar-app-structure.html" class="sidebar-link">App Structure</a><li><a href="/guide/quasar-app-configuration.html" class="sidebar-link">App Configuration</a><li><a href="/guide/quasar-app-starting-point.html" class="sidebar-link">Starting Point</a><li><a href="/guide/quasar-pages.html" class="sidebar-link">Pages</a><li><a href="/guide/quasar-layouts.html" class="sidebar-link">Layouts</a><li><a href="/guide/vue-model-communication.html" class="sidebar-link current">Vue Model Communication</a><li><a href="/guide/quasar-build-system.html" class="sidebar-link">Build System</a><li><a href="/guide/quasar-theming.html" class="sidebar-link">Theming</a><li><a href="/guide/native-mobile-app-wrapper.html" class="sidebar-link">Native Mobile App Wrapper</a><li><a href="/guide/importing-dependencies.html" class="sidebar-link">Importing Dependencies</a></ul><h3>Release Notes</h3><ul class="menu-root"><li><a href="/guide/quasar-cli-release-notes.html" class="sidebar-link">Quasar CLI</a><li><a href="/guide/quasar-framework-release-notes.html" class="sidebar-link">Quasar Framework</a><li><a href="/guide/development-plans.html" class="sidebar-link">Development Plans</a></ul><h3>Miscellaneous</h3><ul class="menu-root"><li><a href="/guide/upgrade-app-to-latest-quasar.html" class="sidebar-link">Upgrade App to Latest Quasar</a><li><a href="/guide/commonjs-format.html" class="sidebar-link">CommonJS Format</a></ul></div></div><div id="main"><div class="content"><h1>VueModel Communication <a href="https://github.com/rstoenescu/quasar-site/edit/master/source/guide/vue-model-communication.md" target="_blank">&nbsp;&nbsp;<i class="fa fa-pencil"></i>&nbsp;&nbsp;</a></h1><p>As you should know, Pages and Layouts are essentially Vue instances. So they have a data object. It is good to learn how to efficiently share parts of the data object between components.<p>We’ll start with an example of how to communicate between a Page and a Layout and then explaining how things work in the subsequent section.<h2 id="Page-Layout-Communication-Example"><a href="#Page-Layout-Communication-Example" class="headerlink" title="Page-Layout Communication Example"></a>Page-Layout Communication Example</h2><p>You can make use of the <code>quasar.current.page</code> and <code>quasar.current.layout</code> globals.<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Page Script file (defining its VueModel):</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  done(&#123;</span><br><span class="line">    ...,</span><br><span class="line">    data: &#123;</span><br><span class="line">      ...,</span><br><span class="line">      checkboxModel: quasar.current.layout.vm.$data.checkboxModel</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Layout Script file (defining its VueModel):</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  done(&#123;</span><br><span class="line">    ...,</span><br><span class="line">    data: &#123;</span><br><span class="line">      ...,</span><br><span class="line">      checkboxModel: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></table></figure><blockquote><p><strong>IMPORTANT</strong><br>Please note that we are using a Function to define the Page’s VueModel. This allows us to connect Layout’s VM to Page’s VM each time the respective Page is loaded.<br>-<br>If we wouldn’t have used a Function in Page’s script file, then the link would have been made only when the Page is first loaded. Subsequent loads of the Page would maintain previous connections, which would render the functionality useless.<br>-<br>When defining a Layout or a Page through a Function, that Function is being run every time the Layout/Page is loaded.</blockquote><h2 id="Explaining-the-Communication-Design"><a href="#Explaining-the-Communication-Design" class="headerlink" title="Explaining the Communication Design"></a>Explaining the Communication Design</h2><p><em>The following is an extract (and adaptation) from <a href="http://vuejs.org/guide/application.html#State-Management" target="_blank" rel="external">VueJS official website &gt; State Management</a></em>.<p>In large applications, state management often becomes complex due to multiple pieces of state scattered across many components and the interactions between them. It is often overlooked that the source of truth in Vue instances is the raw data object - a Vue instances simply proxies access to it. Therefore, if you have a piece of state that should be shared by multiple instances, you should avoid duplicating it and share it by identity:<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sourceOfTruth = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vmA = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: sourceOfTruth</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vmB = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: sourceOfTruth</span><br><span class="line">&#125;)</span><br></pre></table></figure><p>Now whenever <code>sourceOfTruth</code> is mutated, both <code>vmA</code> and <code>vmB</code> will update their views automatically. Extending this idea further, we would arrive at the <strong>store pattern</strong>:<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> store = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    message: <span class="string">'Hello!'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  actionA: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state.message = <span class="string">'action A triggered'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  actionB: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state.message = <span class="string">'action B triggered'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vmA = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    privateState: &#123;&#125;,</span><br><span class="line">    sharedState: store.state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vmB = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    privateState: &#123;&#125;,</span><br><span class="line">    sharedState: store.state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></table></figure><p>Notice we are putting all actions that mutate the store’s state inside the store itself. This type of centralized state management makes it easier to understand what type of mutations could happen to the state, and how are they triggered. Each component can still own and manage its private state.<p><img src="/images/vue-state-management.png" alt="Vue State Management"><p>One thing to take note is that you should never replace the original state object in your actions - the components and the store need to share reference to the same object in order for the mutations to be observed.<p>If we enforce a convention where components are never allowed to directly mutate state that belongs to a store, but should instead dispatch events that notify the store to perform actions, we’ve essentially arrived at the <a href="https://facebook.github.io/flux/" target="_blank" rel="external">Flux</a> architecture. The benefits of this convention is we can record all state mutations happening to the store, and on top of that we can implement advanced debugging helpers such as mutation logs, snapshots, history re-rolls etc.<p>The Flux architecture is commonly used in React applications. Turns out the core idea behind Flux can be quite simply achieved in Vue.js, thanks to the unobtrusive reactivity system. Do note what we demonstrated here is just an example to introduce the concept - you may not need it at all for simple scenarios, and you should adapt the pattern to fit the real needs of your application.<div class="guide-links"><span><a href="/guide/quasar-layouts.html"><i class="fa fa-chevron-left"></i> Layouts</a></span> <span style="float:right"><a href="/guide/quasar-build-system.html">Build System <i class="fa fa-chevron-right"></i></a></span></div><div class="footer"><hr><div>Last updated: Fri Jun 03 2016</div>Caught a mistake or want to contribute to the documentation? <a href="https://github.com/rstoenescu/quasar-site/edit/master/source/guide/vue-model-communication.md" target="_blank">Suggest an edit on GitHub <i class="fa fa-pencil"></i></a></div></div><aside id="preview" style="display:none"><div id="preview-chooser"><a data-theme="android" class="active"><i class="fa fa-android"></i></a> <a data-theme="apple"><i class="fa fa-apple"></i></a> <a data-theme="desktop"><i class="fa fa-desktop"></i></a></div><div id="android-preview" class="theme active"><iframe id="android-iframe" frameborder="0"></iframe><a class="view-source" target="_blank"><i class="fa fa-file-code-o"></i><br>View Source</a></div><div id="apple-preview" class="theme"><iframe id="apple-iframe" frameborder="0"></iframe><a class="view-source" target="_blank"><i class="fa fa-file-code-o"></i><br>View Source</a></div><div id="desktop-preview" class="theme"><iframe id="desktop-iframe" frameborder="0"></iframe><div><a class="button view-source" target="_blank">View Source <i class="fa fa-file-code-o"></i></a> <a id="btn-close-desktop-view" class="button"><i class="fa fa-times"></i></a></div></div></aside></div><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-6317975-4","auto"),ga("send","pageview")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1)</script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scroll/7.1.1/js/smooth-scroll.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script src="/js/page-combined-a6d895b08f.js"></script>